\hypertarget{heap_8h}{}\section{include/mem/heap.h File Reference}
\label{heap_8h}\index{include/mem/heap.\+h@{include/mem/heap.\+h}}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{heap_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structheader}{header}
\item 
struct \hyperlink{structfooter}{footer}
\item 
struct \hyperlink{structindex__entry}{index\+\_\+entry}
\item 
struct \hyperlink{structindex__table}{index\+\_\+table}
\item 
struct \hyperlink{structheap}{heap}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{heap_8h_a032503e76d6f69bc67e99e909c8125da}{T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}~0x1000
\item 
\#define \hyperlink{heap_8h_a15073b9742f7e29d8174509197eb4ab9}{K\+H\+E\+A\+P\+\_\+\+B\+A\+SE}~0x\+D000000
\item 
\#define \hyperlink{heap_8h_aee52619f74498ad224eb8e4354b89e40}{K\+H\+E\+A\+P\+\_\+\+M\+IN}~0x10000
\item 
\#define \hyperlink{heap_8h_a0f2696767a10e6efffc64e9b459c4ea6}{K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}~0x1000000
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} \hyperlink{heap_8h_a9bfb8053c2382598ef5b2175f475d49a}{\+\_\+kmalloc} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} size, int align, \hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} $\ast$phys\+\_\+addr)
\item 
\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} \hyperlink{heap_8h_a15d6a52c5c080c8c7ffc73e336d8e574}{kmalloc} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} size)
\item 
\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} \hyperlink{heap_8h_aa2a6fb2aa05727dc1e7d72cbc108e63c}{kfree} ()
\item 
void \hyperlink{heap_8h_a755a69ff831b6e23a808dcf4b9944854}{init\+\_\+kheap} ()
\item 
\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} \hyperlink{heap_8h_a2b1d5a9ba11695605f74fc10cd719af5}{alloc} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} size, \hyperlink{structheap}{heap} $\ast$hp, int align)
\item 
\hyperlink{structheap}{heap} $\ast$ \hyperlink{heap_8h_a686135c02695aef4208f93d4549a15d0}{make\+\_\+heap} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} \hyperlink{tables_8h_ab5763c2b18c825c8b8fba44b2e60ddc1}{base}, \hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} max, \hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} min)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{heap_8h_aaa4b117a86b9205e66f2cde318c1f01e}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{heap.\+h@{heap.\+h}!K\+H\+E\+A\+P\+\_\+\+B\+A\+SE@{K\+H\+E\+A\+P\+\_\+\+B\+A\+SE}}
\index{K\+H\+E\+A\+P\+\_\+\+B\+A\+SE@{K\+H\+E\+A\+P\+\_\+\+B\+A\+SE}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{K\+H\+E\+A\+P\+\_\+\+B\+A\+SE}{KHEAP_BASE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define K\+H\+E\+A\+P\+\_\+\+B\+A\+SE~0x\+D000000}\hypertarget{heap_8h_a15073b9742f7e29d8174509197eb4ab9}{}\label{heap_8h_a15073b9742f7e29d8174509197eb4ab9}
\index{heap.\+h@{heap.\+h}!K\+H\+E\+A\+P\+\_\+\+M\+IN@{K\+H\+E\+A\+P\+\_\+\+M\+IN}}
\index{K\+H\+E\+A\+P\+\_\+\+M\+IN@{K\+H\+E\+A\+P\+\_\+\+M\+IN}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{K\+H\+E\+A\+P\+\_\+\+M\+IN}{KHEAP_MIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define K\+H\+E\+A\+P\+\_\+\+M\+IN~0x10000}\hypertarget{heap_8h_aee52619f74498ad224eb8e4354b89e40}{}\label{heap_8h_aee52619f74498ad224eb8e4354b89e40}
\index{heap.\+h@{heap.\+h}!K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE@{K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}}
\index{K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE@{K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}{KHEAP_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define K\+H\+E\+A\+P\+\_\+\+S\+I\+ZE~0x1000000}\hypertarget{heap_8h_a0f2696767a10e6efffc64e9b459c4ea6}{}\label{heap_8h_a0f2696767a10e6efffc64e9b459c4ea6}
\index{heap.\+h@{heap.\+h}!T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}}
\index{T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}{TABLE_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE~0x1000}\hypertarget{heap_8h_a032503e76d6f69bc67e99e909c8125da}{}\label{heap_8h_a032503e76d6f69bc67e99e909c8125da}
Kernel heap. 

\subsection{Function Documentation}
\index{heap.\+h@{heap.\+h}!\+\_\+kmalloc@{\+\_\+kmalloc}}
\index{\+\_\+kmalloc@{\+\_\+kmalloc}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{\+\_\+kmalloc(u32int size, int align, u32int $\ast$phys\+\_\+addr)}{_kmalloc(u32int size, int align, u32int *phys_addr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u32int} \+\_\+kmalloc (
\begin{DoxyParamCaption}
\item[{{\bf u32int}}]{size, }
\item[{int}]{page\+\_\+align, }
\item[{{\bf u32int} $\ast$}]{phys\+\_\+addr}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_a9bfb8053c2382598ef5b2175f475d49a}{}\label{heap_8h_a9bfb8053c2382598ef5b2175f475d49a}
Base-\/level kernel memory allocation routine. Used to provide page alignment and access physical addresses of allocations. Called by kmalloc with align=0, physical\+\_\+address=0.


\begin{DoxyParams}{Parameters}
{\em size} & The amount of memory to allocate \\
\hline
{\em align} & The page alignment \\
\hline
{\em phys\+\_\+addr} & The physical address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The memory address 
\end{DoxyReturn}
\index{heap.\+h@{heap.\+h}!alloc@{alloc}}
\index{alloc@{alloc}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{alloc(u32int size, heap $\ast$hp, int align)}{alloc(u32int size, heap *hp, int align)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u32int} alloc (
\begin{DoxyParamCaption}
\item[{{\bf u32int}}]{size, }
\item[{{\bf heap} $\ast$}]{h, }
\item[{int}]{align}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_a2b1d5a9ba11695605f74fc10cd719af5}{}\label{heap_8h_a2b1d5a9ba11695605f74fc10cd719af5}
Allocates some memory using the given heap. Can specify page-\/alignment.


\begin{DoxyParams}{Parameters}
{\em size} & The amount of memory to allocate \\
\hline
{\em hp} & The heap to allocate on \\
\hline
{\em align} & The page alignment \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The memory address 
\end{DoxyReturn}
\index{heap.\+h@{heap.\+h}!init\+\_\+kheap@{init\+\_\+kheap}}
\index{init\+\_\+kheap@{init\+\_\+kheap}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{init\+\_\+kheap()}{init_kheap()}}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+kheap (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_a755a69ff831b6e23a808dcf4b9944854}{}\label{heap_8h_a755a69ff831b6e23a808dcf4b9944854}
Initialize the kernel heap, and set it as the current heap. \index{heap.\+h@{heap.\+h}!kfree@{kfree}}
\index{kfree@{kfree}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{kfree()}{kfree()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u32int} kfree (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_aa2a6fb2aa05727dc1e7d72cbc108e63c}{}\label{heap_8h_aa2a6fb2aa05727dc1e7d72cbc108e63c}
Free kernel memory.

\begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\index{heap.\+h@{heap.\+h}!kmalloc@{kmalloc}}
\index{kmalloc@{kmalloc}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{kmalloc(u32int size)}{kmalloc(u32int size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u32int} kmalloc (
\begin{DoxyParamCaption}
\item[{{\bf u32int}}]{size}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_a15d6a52c5c080c8c7ffc73e336d8e574}{}\label{heap_8h_a15d6a52c5c080c8c7ffc73e336d8e574}
Standard memory allocation routine. Use this unless you need to specify alignment or obtain a physical address. Calls \+\_\+kmalloc.


\begin{DoxyParams}{Parameters}
{\em size} & The amount of memory to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The memory address 
\end{DoxyReturn}
\index{heap.\+h@{heap.\+h}!make\+\_\+heap@{make\+\_\+heap}}
\index{make\+\_\+heap@{make\+\_\+heap}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{make\+\_\+heap(u32int base, u32int max, u32int min)}{make_heap(u32int base, u32int max, u32int min)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf heap}$\ast$ make\+\_\+heap (
\begin{DoxyParamCaption}
\item[{{\bf u32int}}]{base, }
\item[{{\bf u32int}}]{max, }
\item[{{\bf u32int}}]{min}
\end{DoxyParamCaption}
)}\hypertarget{heap_8h_a686135c02695aef4208f93d4549a15d0}{}\label{heap_8h_a686135c02695aef4208f93d4549a15d0}
Create a new heap.


\begin{DoxyParams}{Parameters}
{\em base} & Physical start address of the heap \\
\hline
{\em max} & Maximum size the heap may grow to \\
\hline
{\em min} & Minium/\+Initial size \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The address of the heap 
\end{DoxyReturn}


\subsection{Variable Documentation}
\index{heap.\+h@{heap.\+h}!\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}!heap.\+h@{heap.\+h}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+attribute\+\_\+\+\_\+}{__attribute__}}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf gdt\+\_\+entry\+\_\+struct} \+\_\+\+\_\+attribute\+\_\+\+\_\+}\hypertarget{heap_8h_aaa4b117a86b9205e66f2cde318c1f01e}{}\label{heap_8h_aaa4b117a86b9205e66f2cde318c1f01e}
